---
title: "Tips on using hyperspy"
author: "J. R. Minter"
date: "`r format(Sys.time(), '%Y-%m-%d')`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Hyperspy tips}
  %\VignetteEngine{knitr::rmarkdown}
  \usepackage[utf8]{inputenc}
---

[Back to Index](../README.html)

See also [python tips](../python/python.html)

##  Updates

### Anaconda

From my cmd-anaconda prompt...

```
conda update conda
conda update anaconda
conda update --all
```

### hyperspy

#### Temporarily install a branch

From my cmd-anaconda prompt...
```
pip uninstall hyperspy
cd %GITHOME%/hyperspy
pip install -e ./
```

#### Not affected by git...

To be **really** clean...

1. delete everything from the local git repo but `.git`
2. From git bash prompt

```
git checkout <branch>
git reset --hard
```

From my cmd-anaconda prompt...
```
pip uninstall hyperspy
cd %GITHOME%/hyperspy
python setup.py install
```


### Key imports for iPy3 notebooks

A really helpful post on [stackoverflow](http://stackoverflow.com/questions/3828723/why-we-need-sys-setdefaultencodingutf-8-in-a-py-script)

The last answer (big surprise...) had the key. On Widows set an
environment variable.

```
PYTHONIOENCODING=UTF-8
```

there are **many** warnings to **not** use

```
import sys
reload(sys)
sys.setdefaultencoding("utf-8")
```

#### My current Notebook setup block
```
%matplotlib inline
import os
import numpy as np
import matplotlib.pyplot as plt
import hyperspy.hspy as hs
# set the default figure size
plt.rcParams['figure.figsize'] = 11, 7
```

Note, with this approach we need to be more explicit with the
class structure. Where older scripts wrote

```
signals.Spectrum()
```

It now requires more explict

```
hs.signals.Spectrum()
```

## Getting development right to test new EDS model

1. Deleted old hyperspy fork.

2. Created a new hyperspy fork.

3. Clone this locally.

```
git clone https://github.com/jrminter/hyperspy.git
cd hyperspy
```

4. Create a branch testPB473 `git checkout -b testPB473` Add some
   text to eds.rst. Push with `git push`.
   
5. I used the github gui to send my forked hyperspy repository from Pierre Burdet's.

<figure>
  <img src="figs/pull-req.png"
  alt="Drawing" style="width: 640px;"/>
<figcaption>Figure 1. Pull request 473. </figcaption>
</figure>

6. I merged the pull request on github. I then pulled it down. I now have branches `master` and `testPB473`. Should just need to pull this down at home...

7. Pull down the remote branch(es) locally

```
git checkout --track origin/testPB473
```

and

```
git checkout --track origin/NEW_eds_model
```

8. To install (master) in anaconda

from git prompt

```
git checkout master
```

From my cmd-anaconda prompt...

```
conda update conda
conda update anaconda
conda update --all
cd %GITHOME%/hyperspy
pip install -e ./
```


[Back to Index](../README.html)
